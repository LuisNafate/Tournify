<section class="join-tournament-container">
  <div class="join-header">
    <h1>Unirse al Torneo</h1>
    <p *ngIf="tournament">{{ tournament.name }}</p>
  </div>

  <div class="alert-info" *ngIf="!isAuthenticated">
    <p>Para unirte a este torneo, debes iniciar sesión o registrarte.</p>
  </div>

  <form [formGroup]="joinForm" (ngSubmit)="onSubmit()" class="join-form">
    <div class="form-section">
      <h2>Información del Equipo</h2>

      <div class="form-group">
        <label for="teamName">Nombre del Equipo *</label>
        <input
          type="text"
          id="teamName"
          formControlName="teamName"
          placeholder="Ej: Los Tigres"
          [class.error]="joinForm.get('teamName')?.invalid && joinForm.get('teamName')?.touched">
        <span class="error-message" *ngIf="joinForm.get('teamName')?.invalid && joinForm.get('teamName')?.touched">
          El nombre del equipo es requerido (mínimo 3 caracteres)
        </span>
      </div>

      <div class="form-group">
        <label for="teamMembers">Número de Jugadores *</label>
        <input
          type="number"
          id="teamMembers"
          formControlName="teamMembers"
          placeholder="Ej: 5"
          min="1"
          [class.error]="joinForm.get('teamMembers')?.invalid && joinForm.get('teamMembers')?.touched">
        <span class="error-message" *ngIf="joinForm.get('teamMembers')?.invalid && joinForm.get('teamMembers')?.touched">
          El número de jugadores es requerido
        </span>
      </div>
    </div>

    <div class="form-section">
      <h2>Información del Capitán</h2>

      <div class="form-group">
        <label for="captainName">Nombre del Capitán *</label>
        <input
          type="text"
          id="captainName"
          formControlName="captainName"
          placeholder="Nombre completo"
          [class.error]="joinForm.get('captainName')?.invalid && joinForm.get('captainName')?.touched">
        <span class="error-message" *ngIf="joinForm.get('captainName')?.invalid && joinForm.get('captainName')?.touched">
          El nombre del capitán es requerido
        </span>
      </div>

      <div class="form-group">
        <label for="captainEmail">Email del Capitán *</label>
        <input
          type="email"
          id="captainEmail"
          formControlName="captainEmail"
          placeholder="email@ejemplo.com"
          [class.error]="joinForm.get('captainEmail')?.invalid && joinForm.get('captainEmail')?.touched">
        <span class="error-message" *ngIf="joinForm.get('captainEmail')?.invalid && joinForm.get('captainEmail')?.touched">
          Email válido requerido
        </span>
      </div>

      <div class="form-group">
        <label for="captainPhone">Teléfono del Capitán *</label>
        <input
          type="tel"
          id="captainPhone"
          formControlName="captainPhone"
          placeholder="(555) 123-4567"
          [class.error]="joinForm.get('captainPhone')?.invalid && joinForm.get('captainPhone')?.touched">
        <span class="error-message" *ngIf="joinForm.get('captainPhone')?.invalid && joinForm.get('captainPhone')?.touched">
          El teléfono es requerido
        </span>
      </div>
    </div>

    <div class="form-section">
      <h2>Información Adicional</h2>

      <div class="form-group">
        <label for="additionalInfo">Comentarios o Información Adicional</label>
        <textarea
          id="additionalInfo"
          formControlName="additionalInfo"
          placeholder="Agrega cualquier información relevante para el organizador..."
          rows="4"></textarea>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancel()">Cancelar</button>
      <button type="submit" class="btn-submit" [disabled]="joinForm.invalid && isAuthenticated">
        Enviar Solicitud
      </button>
    </div>
  </form>
</section>
