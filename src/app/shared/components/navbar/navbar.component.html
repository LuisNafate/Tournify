<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-logo">
      <a routerLink="/">Tournify</a>
    </div>

    <div class="navbar-center">
      <div class="navbar-menu">
        <a routerLink="/tournaments/list" class="nav-link">Torneos</a>
        <a routerLink="/" class="nav-link">Acerca de nosotros</a>
        <a routerLink="/" class="nav-link">Noticias</a>
        <a href="https://discord.com" target="_blank" class="nav-link discord-link">Discord</a>
      </div>
    </div>

    <div class="navbar-actions">
      <div *ngIf="usuarioActual$ | async as user; else loggedOut" class="profile-menu">
        <!-- Selector de Rol -->
        <app-role-switcher></app-role-switcher>
        
        <div class="user-dropdown" (click)="toggleDropdown()">
          <div class="user-info">
            <img src="assets/images/Avatar.png" alt="Avatar" class="profile-avatar" />
            <div class="user-details">
              <span class="profile-name">{{ user.firstName || user.username }}</span>
              <span class="profile-role">{{ getRoleLabel(user.role) }}</span>
            </div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="dropdown-arrow" [class.open]="isDropdownOpen">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </div>

          <!-- Dropdown Menu -->
          <div class="dropdown-menu" [class.show]="isDropdownOpen">
            <a routerLink="/dashboard/profile" class="dropdown-item" (click)="closeDropdown()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              Mi Perfil
            </a>
            <a *ngIf="user.role === 'admin'" routerLink="/admin" class="dropdown-item admin-item" (click)="closeDropdown()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
              </svg>
              Panel de Admin
            </a>
            <div class="dropdown-divider"></div>
            <button (click)="logout()" class="dropdown-item logout-item">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Cerrar Sesión
            </button>
          </div>
        </div>
      </div>

      <ng-template #loggedOut>
        <a routerLink="/auth/login" class="btn-login">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
            <polyline points="10 17 15 12 10 7"></polyline>
            <line x1="15" y1="12" x2="3" y2="12"></line>
          </svg>
          Iniciar sesión
        </a>
      </ng-template>
    </div>
  </div>
</nav>